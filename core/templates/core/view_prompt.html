{% extends "core/base.html" %}

{% block content %}

<h2 class="mb-4">ğŸ“ AI Prompt é…ç½®</h2>

<div class="card mb-4">
    <div class="card-header" style="background-color: #f8f9fa; border-bottom: 2px solid #dee2e6;">
        <h5 class="mb-0" style="color: #495057;">
            <i class="fa fa-info-circle text-secondary"></i> ç³»ç»Ÿæç¤ºè¯ï¼ˆSystem Promptï¼‰
        </h5>
    </div>
    <div class="card-body">
        <pre style="background-color: #f8f9fa; padding: 15px; border-radius: 6px; border-left: 3px solid #0d6efd; white-space: pre-wrap; word-wrap: break-word;">{{ prompt_config.system_prompt }}</pre>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header" style="background-color: #f8f9fa; border-bottom: 2px solid #dee2e6;">
        <h5 class="mb-0" style="color: #495057;">
            <i class="fa fa-database text-secondary"></i> æ•°æ®åº“è¡¨ç»“æ„è¯´æ˜
        </h5>
    </div>
    <div class="card-body">
        <pre style="background-color: #f8f9fa; padding: 15px; border-radius: 6px; border-left: 3px solid #28a745; white-space: pre-wrap; word-wrap: break-word;">{{ prompt_config.table_schema }}</pre>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header" style="background-color: #f8f9fa; border-bottom: 2px solid #dee2e6;">
        <h5 class="mb-0" style="color: #495057;">
            <i class="fa fa-code text-secondary"></i> ç”¨æˆ·æç¤ºè¯æ¨¡æ¿
        </h5>
    </div>
    <div class="card-body">
        <p class="text-muted mb-3">
            <small>æ­¤æ¨¡æ¿ä¸­çš„ <code>{table_schema}</code> å’Œ <code>{question}</code> ä¼šè¢«å®é™…å†…å®¹æ›¿æ¢</small>
        </p>
        <pre style="background-color: #f8f9fa; padding: 15px; border-radius: 6px; border-left: 3px solid #ffc107; white-space: pre-wrap; word-wrap: break-word;">{{ prompt_config.user_prompt_template }}</pre>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <p class="text-muted mb-0">
            <small>
                <strong>æœ€åæ›´æ–°ï¼š</strong>{{ prompt_config.updated_at|date:"Y-m-d H:i:s" }}
                {% if prompt_config.updated_by %}
                    <strong>æ›´æ–°äººï¼š</strong>{{ prompt_config.updated_by.username }}
                {% endif %}
            </small>
        </p>
        {% if user.is_superuser %}
        <a href="{% url 'edit_prompt' %}" class="btn btn-primary mt-3">
            <i class="fa fa-edit"></i> ç¼–è¾‘ Promptï¼ˆç®¡ç†å‘˜ï¼‰
        </a>
        {% endif %}
    </div>
</div>

{% endblock %}

