<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>832 å·¥ç¨‹æ•°æ®åº“ç³»ç»Ÿ</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome å›¾æ ‡åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            background: #f4f6f9;
        }
        .sidebar {
            width: 230px;
            height: 100vh;
            position: fixed;
            background: #343a40;
            padding-top: 20px;
        }
        .sidebar a {
            color: #c2c7d0;
            padding: 12px 20px;
            display: block;
            text-decoration: none;
            font-size: 15px;
        }
        .sidebar a:hover {
            background: #495057;
            color: white;
        }
        .content-wrapper {
            margin-left: 230px;
            padding: 25px;
        }
        .nav-link {
            color: white !important;
        }
        .sidebar-title {
            color: #adb5bd;
            font-size: 13px;
            padding: 0 20px;
            margin-top: 15px;
            margin-bottom: 5px;
            text-transform: uppercase;
        }
        .logout-btn {
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            padding: 0.375rem 0.75rem;
            vertical-align: middle;
        }
        .logout-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
    </style>

    {% block extra_css %}{% endblock %}
</head>

<body>

<!-- é¡¶éƒ¨å¯¼èˆªæ  -->
<nav class="navbar navbar-dark bg-dark fixed-top" style="margin-left:230px;">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">
            ğŸ“Š 832 å·¥ç¨‹æ•°æ®åº“ç³»ç»Ÿ
        </span>

        <div class="d-flex">
            {% if user.is_authenticated %}
                {% load attr_extras %}
                <span class="navbar-text text-white me-3">
                    <a href="/profile/" class="text-white text-decoration-none">
                        ğŸ‘¤ {{ user.username }}
                    </a>
                    
                    {% if user.is_superuser %}
                        <span class="badge bg-danger">ç®¡ç†å‘˜</span>
                    {% elif user|in_group:"data_entry" %}
                        <span class="badge bg-warning text-dark">æ•°æ®å½•å…¥</span>
                    {% elif user|in_group:"analyst" %}
                        <span class="badge bg-info">åˆ†æå¸ˆ</span>
                    {% else %}
                        <span class="badge bg-secondary">æ™®é€šç”¨æˆ·</span>
                    {% endif %}
                </span>

                <a href="/logout/" class="btn btn-outline-light btn-sm logout-btn">
                    <i class="fa fa-sign-out-alt me-1"></i> é€€å‡º
                </a>

            {% else %}
                <a href="/register/" class="btn btn-outline-light btn-sm me-2">æ³¨å†Œ</a>
                <a href="/login/" class="btn btn-outline-light btn-sm">ç™»å½•</a>
            {% endif %}

        </div>
    </div>
</nav>


<!-- å·¦ä¾§ä¾§è¾¹æ  -->
<div class="sidebar">

    <a href="/"><i class="fa fa-home"></i> é¦–é¡µ</a>

    <div class="sidebar-title">æ•°æ®è¡¨</div>
    <a href="/county/"><i class="fa fa-map"></i> Countyï¼ˆå¿åŸŸï¼‰</a>
    <a href="/infra/"><i class="fa fa-road"></i> åŸºç¡€è®¾æ–½</a>
    <a href="/agri/"><i class="fa fa-lemon"></i> å†œä¸šé”€å”®</a>
    <a href="/economy/"><i class="fa fa-chart-line"></i> ç»æµæŒ‡æ ‡</a>
    <a href="/demo/"><i class="fa fa-users"></i> äººå£ç»“æ„</a>

    <div class="sidebar-title">é«˜çº§åŠŸèƒ½</div>
    <a href="/database/"><i class="fa fa-database"></i> æ•°æ®åº“è¯¦æƒ…</a>
    <a href="/sql/"><i class="fa fa-terminal"></i> SQL æŸ¥è¯¢</a>
    <a href="/smart/"><i class="fa fa-brain"></i> æ™ºèƒ½ AI æŸ¥è¯¢</a>
    <a href="/prompt/"><i class="fa fa-eye"></i> æŸ¥çœ‹ AI Prompt</a>

    <div class="sidebar-title">ç³»ç»Ÿ</div>
    {% if user.is_authenticated %}
    <a href="/profile/"><i class="fa fa-user"></i> ç”¨æˆ·è¯¦æƒ…</a>
    {% endif %}
    
    {% if user.is_authenticated and user.is_superuser %}
    <div class="sidebar-title">ç®¡ç†å‘˜</div>
    <a href="/manage/users/"><i class="fa fa-users-cog"></i> ç”¨æˆ·ç®¡ç†</a>
    <a href="/prompt/edit/"><i class="fa fa-edit"></i> ç¼–è¾‘ AI Prompt</a>
    <a href="/admin/"><i class="fa fa-cog"></i> Django åå°</a>
    {% endif %}
</div>


<!-- å†…å®¹åŒºåŸŸ -->
<div class="content-wrapper" style="padding-top: 80px;">
    {% block content %}
    {% endblock %}
</div>

<!-- Bootstrap JS ä¾èµ– -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

{% block extra_js %}{% endblock %}

</body>
</html>
